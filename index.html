<html>
    <head>
        <script type="text/javascript" src="js/vendor/icanhaz.js"></script>
        <script type="text/javascript" src="js/vendor/zepto.js"></script>
        <script type="text/javascript" src="js/vendor/tabletop.js"></script>
        <script type="text/javascript" src="js/vendor/d3.js"></script>
        <script type="text/javascript" src="js/vendor/sheetsee.js"></script>
    </head>
    <link rel="stylesheet" type="text/css" href="css/style.css"> 
    <body>
    <div id='navigation'>
    <div id='main-content-container'>
    </div>
    <script type="text/javascript">
      document.addEventListener('DOMContentLoaded', function() {
        var gData
        var spreadsheetKey = "0AtdFkghmKEyWdDd2TGxYNkMtZGlhS3U4aDQzdTVTaFE"
        Tabletop.init( { key: spreadsheetKey, callback: showInfo, simpleSheet: true } ) 
      })

      function showInfo(data) {
        console.log(data);
        gData = data
        optionsJSON = ["something", "something"]
        var geoJSON = Sheetsee.createGeoJSON(gData, optionsJSON)
        var map = Sheetsee.loadMap("map")
        Sheetsee.addTileLayer(map, 'examples.map-20v6611k')
        var markerLayer = Sheetsee.addMarkerLayer(geoJSON, map)
        // customize the popup content
        addPopups(map, markerLayer)
        function addPopups(map, markerLayer) {
          markerLayer.on('click', function(e) {
            var feature = e.layer.feature
            var popupContent = '<h3>' + feature.opts.something + '</h3>'
            e.layer.bindPopup(popupContent,{closeButton: false})
          })
        }
      }
    </script>
    </body>
</html>